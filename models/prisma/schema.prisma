// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum RoomTypes {
  JUNIOR_SUITE
  FAMILY_ROOM
  DOUBLE_ROOM
  DELAUX_ROOM
  SUPERIOR_ROOM
}

enum MenuTypes {
  STARTERS
  MAINS
  SALADS
  WINE
}

enum clubhouseTypes {
  SPA
  GYM
  HEALTHCLUB
}

enum ROLE {
  USER
  ADMIN
}

model ADMIN {
  id String @id @default(uuid())

  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  fullName   String
  email      String   @unique
  password   String
  profilePic String?
  birthDate  DateTime
  phoneNum   DateTime @unique
  isDeleted  Boolean  @default(false)
  role       ROLE     @default(ADMIN)

  news        NEWS[]
  contact     CONTACTUS[]
  AppSettings AppSettings?
}

model USER {
  id String @id @default(uuid())

  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  fName      String
  lName      String
  userName   String   @unique
  email      String   @unique
  password   String
  profilePic String?
  birthDate  DateTime
  country    String
  nationalID String   @unique
  isBlocked  Boolean  @default(false)
  isDelted   Boolean  @default(false)
  role       ROLE     @default(USER)

  room       ROOM[]
  review     REVIEW?
  restaurant RESTAURANT[]
  menu       MENU[]
  clubHouse  CLUBHOUSE[]
}

model ROOM {
  id     String @id @default(uuid())
  userId String

  roomNum     String
  checkIn     DateTime
  checkOut    DateTime
  types       RoomTypes @default(JUNIOR_SUITE)
  price       String
  description String
  aminities   String[]
  images      String[]
  adults      Int
  children    Int
  view        String
  isReserved  Boolean   @default(false)
  isDeleted   Boolean   @default(false)

  user          USER            @relation(fields: [userId], references: [id], onDelete: Cascade)
  ExtraServices ExtraServices[]
}

model ExtraServices {
  id     String @id @default(uuid())
  roomId String

  name       String
  price      String
  facilities String[]
  isDeleted  Boolean  @default(false)

  room ROOM @relation(fields: [roomId], references: [id], onDelete: Cascade)
}

model REVIEW {
  id     String @id @default(uuid())
  userId String @unique

  rating    Float
  comment   String
  isDeleted Boolean @default(false)

  user USER @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model RESTAURANT {
  id     String @id @default(uuid())
  userId String

  description String

  user USER   @relation(fields: [userId], references: [id], onDelete: Cascade)
  menu MENU[]
}

model MENU {
  id           String @id @default(uuid())
  userId       String
  restaurantId String

  menuTypes   MenuTypes
  name        String
  ingredients String
  price       String
  isDeleted   Boolean   @default(false)

  user       USER       @relation(fields: [userId], references: [id], onDelete: Cascade)
  restaurant RESTAURANT @relation(fields: [restaurantId], references: [id], onDelete: Cascade)
}

model CLUBHOUSE {
  id     String @id @default(uuid())
  userId String

  clubhouseTypes clubhouseTypes
  description    String
  startTime      DateTime
  endTime        DateTime
  isDeleted      Boolean        @default(false)

  user USER @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model FAQS {
  id        String  @id @default(uuid())
  question  String
  answer    String
  isDeleted Boolean @default(false)
}

model NEWS {
  id      String @id @default(uuid())
  adminId String

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  title       String
  subTitle    String
  description String
  images      String[]
  isDeleted   Boolean  @default(false)

  admin   ADMIN   @relation(fields: [adminId], references: [id], onDelete: Cascade)
  replies REPLY[]
}

model REPLY {
  id     String @id @default(uuid())
  newsId String

  fullName  String
  email     String
  comment   String
  isDeleted Boolean @default(false)

  news NEWS @relation(fields: [newsId], references: [id], onDelete: Cascade)
}

model CONTACTUS {
  id      String @id @default(uuid())
  adminId String

  fullName    String
  email       String
  phoneNum    String
  subject     String
  description String
  isDeleted   Boolean @default(false)
  isRead      Boolean @default(false)

  byAdmin ADMIN @relation(fields: [adminId], references: [id], onDelete: Cascade)
}

// DashBoard

model AppSettings {
  id      String @id @default(uuid())
  adminId String @unique

  hotelName   String
  logo        String
  address     String
  phoneNum    String
  email       String
  socialMedia Json

  admin   ADMIN?          @relation(fields: [adminId], references: [id], onDelete: Cascade)
  sliders HOMESLIDERS[]
  mainVid PROMOTIONVIDEO?
}

model HOMESLIDERS {
  id      String @id @default(uuid())
  adminId String

  photo     String
  header    String
  paragraph String
  isDeleted Boolean @default(false)

  byAdmin AppSettings @relation(fields: [adminId], references: [id], onDelete: Cascade)
}

model PROMOTIONVIDEO {
  id      String @id @default(uuid())
  adminId String @unique

  video       String
  description String

  byAdmin AppSettings @relation(fields: [adminId], references: [id], onDelete: Cascade)
}
